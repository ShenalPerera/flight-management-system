<div class="search-filter" >
  <form #searchFilterForm="ngForm" class="search-form" [hidden]="!airports">
    <mat-form-field appearance="fill">
      <mat-label>Flight number</mat-label>
      <input
        type="text"
        name="flightNumber"
        matInput
        [ngModel] = "availableFlightSearchObject.flightNumber"
        maxLength="4"
        minlength="4"
        pattern="^[A-Za-z]{3}[0-9]{1}$"
      >
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Departure</mat-label>
      <select matNativeControl [ngModel]="availableFlightSearchObject.departure" name="departure"  >
        <option value="" selected></option>
        <option *ngFor="let airport of airports" [value]="airport">
          {{airport | titlecase }}
        </option>
      </select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Arrival</mat-label>
      <select matNativeControl [ngModel]="availableFlightSearchObject.arrival" name="arrival" >
        <option value="" selected></option>
        <option *ngFor="let airport of airports" [value]="airport">
          {{airport | titlecase }}
        </option>
      </select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Departure date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate placeholder="Start date" [ngModel]="availableFlightSearchObject.departureStartDate" name="departureStartDate">
        <input matEndDate placeholder="End date" [ngModel]="availableFlightSearchObject.departureEndDate" name="departureEndDate">
      </mat-date-range-input>
      <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit"  (click)="onClickSearch(searchFilterForm.value)" [disabled]="!searchFilterForm.dirty && searchFilterForm.pristine">Search</button>
    <button mat-raised-button color="primary"   (click)="onClearSearch(searchFilterForm)" [disabled]="!searchFilterForm.dirty">Clear</button>


  </form>
</div>


<div style="width: 100%; " >
  <div class="panel panel-primary " >
    <div class="panel-heading">
      <h2>Flight list</h2>
    </div>
    <div class="panel-body">
      <table class="table table-striped" >
        <thead>
        <tr>
          <th>Flight Number</th>
          <th>Departure</th>
          <th>Arrival</th>
          <th>Departure Date</th>
          <th>Departure Time</th>
          <th>Arrival Date</th>
          <th>Arrival Time</th>
          <th>Fare ($)</th>
        </tr>
        </thead>

        <tbody *ngIf="availableFlightList">

        <tr app-available-flight-item *ngFor="let flightEl of availableFlightList" [availableFlight]="flightEl"  >
        </tbody>
      </table>

    </div>
    <mat-spinner *ngIf="!availableFlightList"  style="margin: 0 auto"></mat-spinner>
  </div>

</div>
